---
services:
  daemon:
    image: ghcr.io/scanopy/scanopy/daemon:v0.13.6
    container_name: scanopy-daemon
    network_mode: host
    privileged: true
    environment:
      SCANOPY_SERVER_URL: http://127.0.0.1:60072
      SCANOPY_PORT: 60073
      SCANOPY_BIND_ADDRESS: 0.0.0.0
      SCANOPY_NAME: scanopy-daemon
      SCANOPY_HEARTBEAT_INTERVAL: 30
      SCANOPY_MODE: Push
      SCANOPY_LOG_LEVEL: info
    # healthcheck:
    #   test: ["CMD-SHELL", "curl -f http://localhost:60073/api/health || exit 1"]
    #   interval: 5s
    #   timeout: 3s
    #   retries: 15
    healthcheck:
      disable: true
    volumes:
      - daemon-config:/root/.config/daemon
      # Comment out the line below to disable docker discovery
      # - /var/run/docker.sock:/var/run/docker.sock:ro

volumes:
  daemon-config:
